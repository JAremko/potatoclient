{:paths ["src" "resources" "target/classes"]

 :deps {org.clojure/clojure {:mvn/version "1.12.2"}
        seesaw/seesaw {:mvn/version "1.5.0"}
        org.clojure/data.json {:mvn/version "2.5.1"}
        ;; Localization
        tongue/tongue {:mvn/version "0.4.4"}
        ;; Malli for data and function schema validation
        metosin/malli {:mvn/version "0.19.1"}
        ;; Kotlin dependencies
        org.jetbrains.kotlin/kotlin-stdlib-jdk8 {:mvn/version "2.2.10"}
        org.jetbrains.kotlin/kotlin-reflect {:mvn/version "2.2.10"}
        org.jetbrains.kotlinx/kotlinx-coroutines-core {:mvn/version "1.10.2"}
        ;; Java dependencies for the stream handler
        com.fasterxml.jackson.core/jackson-databind {:mvn/version "2.19.2"}
        org.slf4j/slf4j-nop {:mvn/version "2.0.17"
                             :exclusions [org.slf4j/slf4j-api]}
        ;; GStreamer for video playback
        org.freedesktop.gstreamer/gst1-java-core {:mvn/version "1.4.0"
                                                  :exclusions [net.java.dev.jna/jna]}
        ;; Add specific JNA version to avoid version range warning
        net.java.dev.jna/jna {:mvn/version "5.17.0"}
        ;; Pronto - Clojure wrapper for Protocol Buffers (our fork with v4 support)
        com.appsflyer/pronto {:git/url "https://github.com/JAremko/pronto.git"
                              :git/sha "5444ae5ec3b567a5565e6c1e90ba0850960331b6"}
        ;; Protocol Buffer dependencies
        com.google.protobuf/protobuf-java {:mvn/version "4.32.0"}
        com.google.protobuf/protobuf-java-util {:mvn/version "4.32.0"}
        ;; DarkLaf for theming support
        com.github.weisj/darklaf-core {:mvn/version "3.1.0"}
        ;; Function specs
        ;; Telemere for logging
        com.taoensso/telemere {:mvn/version "1.1.0"}
        ;; Buf validate - needed for generated Java code compilation and Kotlin validation
        build.buf/protovalidate {:mvn/version "0.13.0"}
        ;; Java WebSocket client library
        org.java-websocket/Java-WebSocket {:mvn/version "1.6.0"}
        ;; Transit for efficient binary communication
        com.cognitect/transit-clj {:mvn/version "1.0.333"}
        com.cognitect/transit-java {:mvn/version "1.0.371"}
        ;; Parsing and pattern matching
        instaparse/instaparse {:mvn/version "1.5.0"}
        org.clojure/core.match {:mvn/version "1.1.0"}
        ;; For converting Java objects to Clojure data
        org.clojure/java.data {:mvn/version "1.3.113"}
        ;; For generative testing support in specs
        org.clojure/test.check {:mvn/version "1.1.1"}
        ;; For better diff output in tests
        lambdaisland/deep-diff2 {:mvn/version "2.12.219"}
        ;; For expressive test assertions with nested data structures
        nubank/matcher-combinators {:mvn/version "3.9.2"}}

 :aliases {:dev {:extra-paths ["dev" "src/potatoclient/kotlin" "target/classes"]
                 :extra-deps {nrepl/nrepl {:mvn/version "1.3.1"}
                              cider/cider-nrepl {:mvn/version "0.57.0"}}
                 :jvm-opts ["-Djna.library.path=/usr/lib"
                            "-Dgstreamer.library.path=/usr/lib"
                            "-Dgstreamer.plugin.path=/usr/lib/gstreamer-1.0"
                            "--enable-native-access=ALL-UNNAMED"
                            "-Dclojure.main.report=stderr"
                            "-Dpotatoclient.validation.enabled=true"
                            "-Dawt.useSystemAAFontSettings=on"]}

           :nrepl {:extra-paths ["dev" "src/potatoclient/kotlin" "target/classes"]
                   :extra-deps {nrepl/nrepl {:mvn/version "1.3.1"}
                                cider/cider-nrepl {:mvn/version "0.57.0"}}
                   :jvm-opts ["-Djna.library.path=/usr/lib"
                              "-Dgstreamer.library.path=/usr/lib"
                              "-Dgstreamer.plugin.path=/usr/lib/gstreamer-1.0"
                              "--enable-native-access=ALL-UNNAMED"
                              "-Djdk.attach.allowAttachSelf"
                                "-Dpotatoclient.validation.enabled=true"
                              "-Dpotatoclient.dev=true"
                              "-Dawt.useSystemAAFontSettings=on"]
                   :main-opts ["-m" "nrepl.cmdline" "--port" "7888"]}

           :run {:extra-paths ["target/classes"]
                 :jvm-opts ["-Djna.library.path=/usr/lib"
                            "-Dgstreamer.library.path=/usr/lib"
                            "-Dgstreamer.plugin.path=/usr/lib/gstreamer-1.0"
                            "--enable-native-access=ALL-UNNAMED"
                            "-Dclojure.compile.warn-on-reflection=true"
                            "-Dawt.useSystemAAFontSettings=on"]
                 :main-opts ["-m" "potatoclient.main"]}

           :uberjar {:extra-paths ["target/classes"]
                     :jvm-opts ["-Djna.library.path=/usr/lib"
                                "-Dgstreamer.library.path=/usr/lib"
                                "-Dgstreamer.plugin.path=/usr/lib/gstreamer-1.0"
                                "--enable-native-access=ALL-UNNAMED"
                                "-Dclojure.compiler.elide-meta=[:doc :file :line :added]"
                                "-Dclojure.compiler.direct-linking=true"]
                     :replace-deps {com.github.seancorfield/depstar {:mvn/version "2.1.303"}}
                     :exec-fn hf.depstar/uberjar
                     :exec-args {:jar "target/potatoclient.jar"
                                 :aot true
                                 :main-class potatoclient.main
                                 :compile-ns :all}}

           :compile-kotlin {:extra-paths ["src/potatoclient/kotlin"]
                            :jvm-opts ["--release" "17"]}

           :mcp {:extra-deps {org.slf4j/slf4j-nop {:mvn/version "2.0.17"}
                              com.bhauman/clojure-mcp {:git/url "https://github.com/bhauman/clojure-mcp.git"
                                                       :git/tag "v0.1.8-alpha"
                                                       :git/sha "776dff4"}}
                 :jvm-opts [
                            "-Dpotatoclient.validation.enabled=true"]
                 :exec-fn clojure-mcp.main/start-mcp-server
                 :exec-args {:port 7888}}

           :build {:deps {io.github.clojure/tools.build {:mvn/version "0.10.10"}}
                   :ns-default build}

           :test {:extra-paths ["test" "target/classes" "target/test-classes"]
                  :extra-deps {io.github.cognitect-labs/test-runner {:git/url "https://github.com/cognitect-labs/test-runner"
                                                                     :sha "3f288f1f16d167723ad87cc35b1dfee3c1681e10"}
                               junit/junit {:mvn/version "4.13.2"}
                               org.jetbrains.kotlin/kotlin-test-junit {:mvn/version "2.2.10"}}
                  :jvm-opts []
                  :main-opts ["-m" "cognitect.test-runner"]
                  :exec-fn cognitect.test-runner.api/test}

           :test-coverage {:extra-paths ["test" "target/classes" "target/test-classes"]
                          :extra-deps {io.github.cognitect-labs/test-runner {:git/url "https://github.com/cognitect-labs/test-runner"
                                                                             :sha "3f288f1f16d167723ad87cc35b1dfee3c1681e10"}
                                       cloverage/cloverage {:mvn/version "1.2.4"}}
                          :jvm-opts []
                          :main-opts ["-m" "cloverage.coverage"
                                      "-p" "src"
                                      "-s" "test"
                                      "--ns-exclude-regex" ".*instrumentation.*|.*cmd\\..*|.*proto.*|.*ipc.*"
                                      "--codecov"
                                      "--junit"
                                      "--text"
                                      "--html"
                                      "--output" "target/coverage"]}

           :test-kotlin {:extra-paths ["test" "target/classes" "target/test-classes"]
                        :extra-deps {org.jacoco/org.jacoco.core {:mvn/version "0.8.13"}
                                     org.jacoco/org.jacoco.report {:mvn/version "0.8.13"}}
                        :jvm-opts ["-javaagent:target/jacocoagent.jar=destfile=target/jacoco.exec"
     ]}

           :format {:extra-deps {dev.weavejester/cljfmt {:mvn/version "0.13.1"}}
                    :main-opts ["-m" "cljfmt.main"]}

           :lint {:extra-deps {clj-kondo/clj-kondo {:mvn/version "2025.07.28"}}
                  :main-opts ["-m" "clj-kondo.main"]}
                  
           :outdated {:extra-deps {com.github.liquidz/antq {:mvn/version "2.11.1276"}}
                      :main-opts ["-m" "antq.core"]}
                      
           :outdated-upgrade {:extra-deps {com.github.liquidz/antq {:mvn/version "2.11.1276"}}
                              :main-opts ["-m" "antq.core" "--upgrade"]}
                              
           ;; Test suites from shared module
           :test-oneof {:extra-paths ["test"]
                        :extra-deps {io.github.cognitect-labs/test-runner 
                                     {:git/tag "v0.5.1" :git/sha "dfb30dd"}}
                        :main-opts ["-m" "test-suites.oneof-suite"]}
           
           :test-malli {:extra-paths ["test"]
                        :extra-deps {io.github.cognitect-labs/test-runner 
                                     {:git/tag "v0.5.1" :git/sha "dfb30dd"}}
                        :main-opts ["-m" "test-suites.malli-suite"]}
           
           :test-serialization {:extra-paths ["test"]
                                :extra-deps {io.github.cognitect-labs/test-runner 
                                             {:git/tag "v0.5.1" :git/sha "dfb30dd"}}
                                :main-opts ["-m" "test-suites.serialization-suite"]}
           
           :test-cmd {:extra-paths ["test"]
                      :extra-deps {io.github.cognitect-labs/test-runner 
                                   {:git/tag "v0.5.1" :git/sha "dfb30dd"}}
                      :main-opts ["-m" "test-suites.cmd-suite"]}
           
           :test-ipc {:extra-paths ["test" "target/java-classes"]
                      :extra-deps {io.github.cognitect-labs/test-runner 
                                   {:git/tag "v0.5.1" :git/sha "dfb30dd"}}
                      :main-opts ["-m" "test-suites.ipc-suite"]}}}
